# 第七讲 类、结构体、指针与引用

> 类可以将变量、数组和函数完美地打包在一起。

## 1. 类与结构体

类完全是为人类服务的

可以打包很多复杂的东西

类的定义：

```cpp
class Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
};


```

类中的变量和函数被统一称为类的`成员变量`。

private后面的内容是私有成员变量，在类的外部不能访问；public后面的内容是公有成员变量，在类的外部可以访问。

类的使用：

```cpp
#include <iostream>

using namespace std;

const int N = 1000010;

class Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int set_age(int a)
        {
            age = a;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
} person_a, person_b, persons[100];

int main()
{
    Person c;

    c.name = "yxc";      // 正确！访问公有变量
    c.age = 18;          // 错误！访问私有变量
    c.set_age(18);       // 正确！set_age()是共有成员变量
    c.add_money(100);

    c.say();
    cout << c.get_age() << endl;

    return 0;
}


```

结构体和类的作用是一样的。不同点在于类默认是private，结构体默认是public。

```cpp
struct Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int set_age(int a)
        {
            age = a;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
} person_a, person_b, persons[100];

```



结构体构造函数:

```cpp
#include <iostream>
#include <cstring>
#include <cstdio>

using namespace std;
struct Person {
    int age, height;
    double money;
    Person() {}
    Person(int _age, int _height) : age(_age), height(_height) {}
    Person(int _age, int _height, double _money) : age(_age), height(_height), money(_money) {}
};

int main () {
    Person p = {18, 180};
    cout << p.money << endl;
}
```



代码长的时候才会显示出类和结构题的作用和好处



## 2. 指针和引用

指针指向存放变量的值的地址。因此我们可以通过指针来修改变量的值。

操作系统运行程序，每个程序都是一个进程（process）

进程的空间（内存），所有进程运行的大小

映射之后，内存会变成一个16g的数组，编码之后内存的地址是16进制的

假设是4G内存，从0X00000000 - 0 XFFFFFFFF， 2的32次放 （单位是字节byte）



内存在上面的是栈，在下面的是堆，局部变量全部在栈，全局变量在堆空间（默认全部初始化成0）



指针

输出地址：

```cpp
#include <iostream>
using namespace std;
char a, b;

int main () {

    char c, d;
    cout << (void*)&a << endl;
    cout << (void*)&b << endl;
    cout << (void*)&c << endl;
    cout << (void*)&d << endl;

    return 0;
}
```

输出：(注意大小顺序)

```cpp
0x10d9bd040
0x10d9bd041
0x7ff7b254a8fb
0x7ff7b254a8fa
```





```cpp
#include <iostream>

using namespace std;

int main()
{
    int a = 10;
    int *p = &a;  //*表示p是int类型的指针

    *p += 5; // *p这个地址表示的真正的数，a也随着变化
    cout << a << endl;

    return 0;
}
```



数组名是个指针，是数组第一个变量的地址，数组的地址必须是连续的一段

数组名是一种特殊的指针。指针可以做运算：

```cpp
#include <iostream>

using namespace std;

int main()
{
    int a[5] = {1, 2, 3, 4, 5};

    for (int i = 0; i < 5; i ++ )
        cout << *(a + i) << endl;

    return 0;
}
```

每个int变量包含4个字节









引用和指针类似，相当于给变量起了个别名。

```cpp
#include <iostream>

using namespace std;

int main()
{
    int a = 10;
    int &p = a;

    p += 5;
    cout << a << endl;

    return 0;
}
```



## 3. 链表

```cpp
#include <iostream>

using namespace std;

struct Node
{
    int val;
    Node* next;
} *head;

int main()
{
    for (int i = 1; i <= 5; i ++ )
    {
        Node* p = new Node();
        p->val = i;
        p->next = head;
        head = p;
    }

    for (Node* p = head; p; p = p->next)
        cout << p->val << ' ';
    cout << endl;

    return 0;
}

```







